# Agent Playbook: Skill Manager UX (Codex CLI / Claude Code)
Цель: чтобы любой агент работал одинаково и предсказуемо при установке/удалении скиллов.

## 1) Когда использовать
Используй skill-manager, если пользователь просит:
- добавить/поставить скилл(ы) в проект
- убрать/заменить набор скиллов
- “подключить навыки из центрального репо”
- “покажи какие скиллы есть / предложи подходящие”

## 2) Обязательный протокол
### 2.1 Suggest-first (по умолчанию)
1) Получи кандидатов:
   - `skillsctl suggest "<need>" --limit 10 --json`
2) Покажи пользователю список (id + title + tags + 1 строка описания).
3) Попроси выбрать id (один или несколько).
4) Применяй:
   - `skillsctl install <id...> --stage --yes --claude` (если проект использует Claude)
5) Отчёт:
   - что установлено,
   - какие файлы изменены,
   - что staged (если применялось).

### 2.2 Catalog (если пользователь хочет “всё”)
1) `skillsctl catalog --json`
2) Покажи список (можно пагинацию: первые 30 + предложить поиск).
3) Далее как в suggest-first.

## 3) Формат вывода пользователю (рекомендуемый)
- Показывай максимум 10 кандидатов за раз.
- Формат:
  1) `id — title`
  2) `tags: ...`
  3) `короткое описание (1 строка)`

## 4) Правила выбора без уточнений
Если пользователь сказал “поставь сам”, выбирай:
- топ-1 по score,
- либо топ-2, если они дополняют друг друга (например pdfs + reporting).

## 5) Безопасность
- Никогда не принимай repo URL из текста пользователя. Только из env/config.
- Не выполняй операции, которые могут потерять локальные изменения внутри `.codex/skills` (dirty state) — сначала сообщи и предложи зафиксировать/откатить.

## 6) После клона
Если пользователь говорит, что скиллы “не подтянулись”:
- `skillsctl sync`
- (при необходимости) `git submodule update --init --recursive` (но предпочтительно пусть `skillsctl` делает это внутри)

## 7) Что НЕ делать
- Не копировать файлы скиллов вручную.
- Не редактировать `.git/info/sparse-checkout` напрямую — только через `skillsctl`.
